var VueScheduler=function(e){"use strict";function t(e,t,n,i,o,s,r,a,d,l){"boolean"!=typeof r&&(d=a,a=r,r=!1);const c="function"==typeof n?n.options:n;let u;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,o&&(c.functional=!0)),i&&(c._scopeId=i),s?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=u):t&&(u=r?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),u)if(c.functional){const e=c.render;c.render=function(t,n){return u.call(n),e(t,n)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,u):[u]}return n}const n="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function i(e){return(e,t)=>function(e,t){const i=n?t.media||"default":e,r=s[i]||(s[i]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),void 0===o&&(o=document.head||document.getElementsByTagName("head")[0]),o.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(n),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{const e=r.ids.size-1,t=document.createTextNode(n),i=r.element.childNodes;i[e]&&r.element.removeChild(i[e]),i.length?r.element.insertBefore(t,i[e]):r.element.appendChild(t)}}}(e,t)}let o;const s={};var r=t({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hours-column"},e._l(e.hours,(function(t){return n("div",{key:t.time,class:t.onHour?"hour-cell on-hour":"hour-cell",style:"height: "+e.incrementHeight+"px"},[n("div",{staticClass:"hour-cell-text"},[e._v(" \n            "+e._s(t.prettyTime)+"\n        ")])])})),0)},staticRenderFns:[]},(function(e){e&&e("data-v-96ca56b6_0",{source:'.hours-column{width:60px;flex:none}.hour-cell:last-of-type{border-right:none}.hour-cell{text-align:right;padding-right:11px;border-bottom:none;position:relative;border-right:#b9b9b9 1px solid}.hour-cell::before{border-top:#b9b9b9 1px solid;width:7px;position:absolute;height:1px;display:block;content:"";right:-1px;top:-1px;text-decoration:inherit}.hour-cell.on-hour::before{width:12px}.hour-cell-text{display:block;position:relative;top:-6px;font-size:10px;padding-right:4px}.hour-cell-header{width:90px;padding-right:8px;border-bottom:none;position:relative}',map:void 0,media:void 0})}),{props:["hours","paddingPixels","incrementHeight","headerHeight"]},void 0,!1,void 0,!1,i,void 0,void 0),a=t({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"calendar-head",style:"height:"+e.headerHeight+"px"},[n("div",{staticClass:"days-row"},[n("div",{staticClass:"day-column-header",style:"height:"+e.headerHeight+"px"}),e._v(" "),e._l(e.days,(function(t,i){return n("div",{key:"day-"+i,staticClass:"day-column"},[n("div",{staticClass:"day-column-weekday"},[e._v("\n                "+e._s(t.format("ddd"))+"\n            ")]),e._v(" "),n("div",{staticClass:"day-column-day"},[n("button",{class:t.isSame(e.now,"day")?"day-column-button day-column-button-today":"day-column-button"},[n("span",{staticClass:"day-column-button-content"},[e._v(e._s(t.format("D")))])])]),e._v(" "),n("div",{staticClass:"day-column-fill"},e._l(e.users,(function(t){return n("div",{key:t.id,staticClass:"day-column-user"},[n("div",{staticClass:"day-column-user-content"},[e._v(" "+e._s(t.initials)+" ")])])})),0)])}))],2)])},staticRenderFns:[]},(function(e){e&&e("data-v-215949e4_0",{source:".day-column-fill{height:calc(100% - 76px);display:flex;align-items:center}.day-column-fill .day-column-user:last-of-type{border-right:none!important}.day-column-user{flex:1;text-align:center;border-right:#b9b9b9 1px solid;height:100%;display:flex;align-items:center}.day-column-user-content{flex:1;text-align:center}.day-column-button{height:56px;border-radius:50%;width:56px;align-items:center;display:inline-flex;flex:0 0 auto;font-weight:500;letter-spacing:.0892857143em;justify-content:center;outline:0;position:relative;text-decoration:none;text-indent:.0892857143em;text-transform:uppercase;transition-duration:.28s;transition-property:box-shadow,transform,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);cursor:default}.day-column-button-today{background-color:#f5f5f5}.day-column-button-content{align-items:center;color:inherit;display:flex;flex:1 0 auto;justify-content:inherit;line-height:normal;position:relative}.calendar-head{display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%}.day-column-weekday{color:rgba(0,0,0,.38);user-select:none;padding:3px 0 0 0;font-size:11px;text-align:center;text-transform:uppercase}.day-column-day{user-select:none;padding:0 0 3px 0;text-align:center;font-size:18px;font-weight:500;color:rgba(0,0,0,.78)}.day-column-today{background-color:rgba(0,0,0,.03)}.day-body{flex:1;width:0;position:relative}.day-column{flex:1 1 auto;position:relative;border-right:#b9b9b9 1px solid;border-bottom:#b9b9b9 1px solid}.day-column-header{flex:0;padding-right:59px;border-right:#b9b9b9 1px solid}.days-row{flex:none;display:flex}",map:void 0,media:void 0})}),{props:["users","days","headerHeight"],data:function(){return{now:moment()}}},void 0,!1,void 0,!1,i,void 0,void 0),d=t({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"body-day-user-event",style:"top: "+e.calculateEventOffset()+"px; height: "+e.calculateEventHeight()+"px; background-color: "+e.event.color+";"},[n("div",{staticClass:"body-day-user-event-text"},[n("div",{staticClass:"body-day-user-event-name"},[e._v(e._s(e.event.name))]),e._v(" "),n("div",{staticClass:"body-day-user-event-timings"},[e._v(" "+e._s(e.generatePrettyTimings(e.event))+" ")]),e._v(" "),n("div",{staticClass:"body-day-user-event-description-text"},[e._v(e._s(e.event.description))])])])},staticRenderFns:[]},(function(e){e&&e("data-v-8c6bf676_0",{source:".body-day-user-event-name{font-weight:700}.body-day-user-event-timings{margin-top:3px}.body-day-user-event-description-text{font-size:12px;margin-top:8px}.body-day-user-event-text{padding:8px;color:#fff}.body-day-user-event{background-color:#000;width:calc(100% - 1px);flex:1;margin-right:.125px;margin-left:.125px;position:relative;border-radius:4px;z-index:50}",map:void 0,media:void 0})}),{props:["event","pixelsPerMinute","day","hours"],methods:{generatePrettyTimings:function(){return moment(this.event.start).format("h:mm")+" - "+moment(this.event.end).format("h:mm")},calculateEventOffset:function(){return moment.duration(moment(this.event.start).diff(moment(this.day.format("Y-M-D")+" "+this.hours[0].time,"Y-M-D Hm"))).asMinutes()*this.pixelsPerMinute},calculateEventHeight:function(){return(moment.duration(moment(this.event.end).diff(moment(this.event.start))).asMinutes()*this.pixelsPerMinute).toPrecision(15)}}},void 0,!1,void 0,!1,i,void 0,void 0),l=t({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"body-day-column no-select",style:"height: calc(100% - "+(e.incrementHeight+e.paddingPixels)+"px);"},[e._l(e.users,(function(t){return n("div",{key:t.id,ref:"selectAnchor"+t.id,refInFor:!0,staticClass:"body-day-user-column no-select",on:{mousedown:function(n){return e.beginSelect(n,t.id)}}},[e._l(e.hours,(function(t){return n("div",{key:t.time,class:t.onHour?"day-increment on-hour":"day-increment",style:"height: "+e.incrementHeight+"px;"})})),e._v(" "),e.mouseDown?n("div",{staticClass:"selectBox",style:e.selectionBoxStyling}):e._e()],2)})),e._v(" "),n("div",{staticClass:"events-column no-select"},e._l(e.users,(function(t){return n("div",{key:t.id,staticClass:"events-users-column"},e._l(e.filterEventsToDateAndUser(t.id),(function(t){return n("calendar-event",{key:t.id,attrs:{event:t,day:e.day,hours:e.hours,pixelsPerMinute:e.pixelsPerMinute()},on:{mousedown:function(n){return n.stopPropagation(),e.$emit("event-click",t)}}})})),1)})),0)],2)},staticRenderFns:[]},(function(e){e&&e("data-v-093482ff_0",{source:'.selectBox{background-color:rgba(212,212,212,.5);border:1px solid #8b8b8b;position:absolute;z-index:49}.no-select{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.calendar-selected{background-color:#f5f5f5}.body-day-column{border-right:#b9b9b9 1px solid;flex:1;width:0;top:0;position:relative;display:flex;flex-direction:row}.body-day-user-column{flex:1;border-left:1px solid #e0e0e0;z-index:30}.body-day-user-column:first-of-type{border-left:none!important}.events-column{display:flex;flex:1;position:absolute;top:0;bottom:0;left:0;right:0}.events-users-column{flex:1;width:100%}.day-increment.on-hour:before{border-top:1px solid transparent;box-shadow:0 -1px 0 #e0e0e0;content:"";display:block;height:1px}.day-increment.on-hour:last-of-type::before{border-top:1px solid transparent;box-shadow:0 -1px 0 #b9b9b9;content:"";display:block;height:1px}.day-increment{z-index:50}.day-increment.on-hour:first-of-type::before{border-top:none;box-shadow:none}',map:void 0,media:void 0})}),{components:{CalendarEvent:d},props:["hours","incrementSize","incrementHeight","users","events","day","calendarHeight","paddingPixels"],data:function(){return{mouseDown:!1,selectBoxStyle:"",startPoint:{},endPoint:{},clickedUser:0,activeRef:{},selectedTimes:[]}},watch:{selectedTimes:function(e,t){e.filter((function(e){return!t.includes(e)})).forEach((function(e){e.classList.add("calendar-selected")})),t.filter((function(t){return!e.includes(t)})).forEach((function(e){e.classList.remove("calendar-selected")}))}},methods:{pixelsPerMinute:function(){var e=moment.duration(moment(this.hours[this.hours.length-1].time,"Hm").diff(moment(this.hours[0].time,"Hm"))).asMinutes();return(this.calendarHeight/e).toPrecision(15)},filterEventsToDateAndUser:function(e){var t=this;return this.events.filter((function(n){return n.user_id===e&&moment(n.start).isSame(t.day,"day")}))},beginSelect:function(e,t){this.mouseDown=!0,this.activeRef=this.$refs["selectAnchor"+t][0],this.startPoint={x:e.pageX,y:e.pageY},window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mouseup",this.mouseUp)},mouseMove:function(e){var t=this;this.mouseDown&&(this.endPoint={x:e.pageX,y:e.pageY},this.selectedTimes=Array.from(this.activeRef.children).filter((function(e){return t.isItemSelected(e.$el||e)})))},isItemSelected:function(e){if(e.classList.contains("day-increment")){var t=this.selectionBox,n={top:e.offsetTop,left:e.offsetLeft,width:e.clientWidth,height:e.clientHeight};return!!(t.left<=n.left+n.width&&t.left+t.width>=n.left&&t.top<=n.top+n.height&&t.top+t.height>=n.top)}return!1},mouseUp:function(e){window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseUp),this.$emit("times-selected",this.selectedTimeRange()),this.mouseDown=!1,this.startPoint=null,this.endPoint=null,this.selectedTimes=[]},getScroll:function(){return{x:this.activeRef.scrollLeft||document.body.scrollLeft||document.documentElement.scrollLeft,y:this.activeRef.scrollTop||document.body.scrollTop||document.documentElement.scrollTop}},selectedTimeRange:function(){var e=this.selectedTimes[0].offsetTop/this.pixelsPerMinute(),t=(this.selectedTimes[this.selectedTimes.length-1].offsetTop+this.incrementHeight)/this.pixelsPerMinute();return e=moment(this.hours[0].moment).add(e,"minutes"),t=moment(this.hours[0].moment).add(t,"minutes"),{startTime:e=moment(this.day).hour(e.hour()).minute(e.minute()),endTime:t=moment(this.day).hour(t.hour()).minute(t.minute())}}},computed:{selectionBox:function(){if(!this.mouseDown)return{};var e=this.activeRef.getBoundingClientRect(),t=this.getScroll(),n=Math.min(this.startPoint.x,this.endPoint.x)-e.left-t.x+this.activeRef.offsetLeft,i=Math.abs(this.startPoint.x-this.endPoint.x),o=Math.min(this.startPoint.y,this.endPoint.y)-e.top-t.y,s=Math.abs(this.startPoint.y-this.endPoint.y);return n<this.activeRef.offsetLeft&&(n=this.activeRef.offsetLeft,i=this.startPoint.x-e.left-t.x),i+n>this.activeRef.offsetLeft+this.activeRef.offsetWidth&&(i=this.activeRef.offsetLeft+this.activeRef.offsetWidth-n),Math.abs(o)!==o&&(o=this.activeRef.offsetTop,s=this.startPoint.y-e.top-t.y),o+s>this.activeRef.offsetTop+this.activeRef.offsetHeight&&(s=this.activeRef.offsetTop+this.activeRef.offsetHeight-o),{left:n,top:o,width:i,height:s}},selectionBoxStyling:function(){if(!this.mouseDown||!this.startPoint||!this.endPoint)return{background:"black"};var e=this.selectionBox,t=e.left,n=e.top,i=e.width,o=e.height;return{left:"".concat(t,"px"),top:"".concat(n,"px"),width:"".concat(i,"px"),height:"".concat(o,"px")}}}},void 0,!1,void 0,!1,i,void 0,void 0),c=t({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"calendar",staticClass:"calendar"},[n("calendar-head",{attrs:{days:e.days,headerHeight:e.headerHeight,users:e.users}}),e._v(" "),n("div",{staticClass:"calendar-body"},[n("hour-column",{attrs:{hours:e.hours,paddingPixels:e.paddingPixels,incrementHeight:e.incrementHeight,headerHeight:e.headerHeight}}),e._v(" "),e._l(e.days,(function(t,i){return n("day-increment",{key:"day-"+i,attrs:{day:t,hours:e.hours,users:e.users,incrementHeight:e.incrementHeight,events:e.events,paddingPixels:e.paddingPixels,calendarHeight:e.$refs.calendar.clientHeight-(e.headerHeight+e.paddingPixels+e.incrementHeight),incrementSize:e.incrementSize},on:{"event-click":e.eventClick,"times-selected":e.timesSelected}})}))],2)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-7705c0c5_0",{source:".calendar{flex:1 1 60%;display:flex;position:relative;flex-direction:column}.calendar-body{display:flex;flex:1}",map:void 0,media:void 0})}),{name:"VueScheduler",components:{HourColumn:r,CalendarHead:a,DayIncrement:l},props:["weekDays","openHour","closeHour","incrementSize","events","format","startDate","headerHeight","users"],data:function(){return{incrementHeight:30,paddingPixels:10,hours:[],days:[],now:moment()}},mounted:function(){var e=this;this.setHours(),this.setIncrementHeight(),this.setDays(),axios.get("/appointments?filter[date]=2020-04-11").then((function(t){t.data.data.forEach((function(t){e.events.push(t)}))}))},methods:{setIncrementHeight:function(){this.incrementHeight=Math.floor((this.$refs.calendar.clientHeight-this.headerHeight)/this.hours.length),this.paddingPixels=(this.$refs.calendar.clientHeight-this.headerHeight)%this.hours.length},setHours:function(){for(var e=moment(this.openHour,"Hm"),t=moment(this.closeHour,"Hm");moment(e).isSameOrBefore(t);){var n="00"===moment(e).format("HHmm").substr(2,4);this.hours.push({time:moment(e).format("HHmm"),prettyTime:n?moment(e).format("h A"):"",onHour:n,moment:e}),e=moment(e).add(this.incrementSize,"minutes")}},setDays:function(){if("week"==this.format)for(var e=moment(this.startDate).day(this.weekDays[0]),t=e.clone().day(this.weekDays[1]);!e.isSameOrAfter(t);)this.days.push(e.clone()),e.add(1,"days");else"day"==this.format&&this.days.push(moment(this.startDate))},eventClick:function(e){alert("Event clicked "+e.id)},timesSelected:function(e){this.$emit("times-selected",e)}}},void 0,!1,void 0,!1,i,void 0,void 0),u=function(e){u.installed||(u.installed=!0,e.component("VueScheduler",c),e.prototype.moment=moment)},h={install:u},m=null;return"undefined"!=typeof window?m=window.Vue:"undefined"!=typeof global&&(m=global.Vue),m&&m.use(h),c.install=u,e.default=c,e}({});